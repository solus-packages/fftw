name       : fftw
version    : 3.3.8
release    : 8
source     :
    - http://fftw.org/fftw-3.3.8.tar.gz : 6113262f6e92c5bd474f2875fa1b01054c4ad5040f6b0da7c03c98821d9ae303
license    : GPL-2.0-or-later
summary    : FFTW Fourier transform library
description: |
    FFTW is a C subroutine library for computing the discrete Fourier transform (DFT) in one or more dimensions, of arbitrary input size, and of both real and complex data (as well as of even/odd data, i.e. the discrete cosine/sine transforms or DCT/DST).
component  : programming
builddeps  :
    - gfortran
    - libpth-devel
setup      : |
    CONFOPTS="$CONFOPTS --prefix=/usr --libdir=%libdir% --disable-static --enable-shared --enable-openmp --enable-sse2 --enable-threads"
    mkdir .fftw-single
    mv * .fftw-single/ && mv .fftw-single fftw-single
    cp -R fftw-single fftw-double
    cp -R fftw-single fftw-long-double
    # Single precision
    cd fftw-single/
    ./configure $CONFOPTS --enable-float
    # Double precision
    cd ../fftw-double/
    ./configure $CONFOPTS --enable-avx
    # Long double
    cd ../fftw-long-double/
    ./configure ${CONFOPTS/--enable-sse2/} --enable-long-double
build      : |
    cd $workdir/fftw-single/
    %make
    %make_install
    cd $workdir/fftw-double/
    %make
    %make_install
    cd $workdir/fftw-long-double/
    %make
    %make_install
